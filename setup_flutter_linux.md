## Download Android Studio from https://developer.android.com/studio.

## Installed VS Code.

## Installed Flutter extension in VS Code.

## Install prerequisites:

```bash
# Install prerequisites
sudo apt-get update -y && sudo apt-get upgrade -y;
sudo apt-get install -y curl git unzip xz-utils zip libglu1-mesa

# Install prerequisites for Android Studio:
sudo apt-get install libc6:amd64 libstdc++6:amd64 lib32z1 libbz2-1.0:amd64

# (Optional) Install Kernel-based Virtual Machine to boost Android emulator:
sudo apt-get install qemu-kvm libvirt-daemon-system libvirt-clients bridge-utils

# Install prerequisites for Flutter:
sudo apt-get install clang ninja-build mesa-utils
```

## Install Android Studio:

```bash
cd ~/Downloads
sudo tar -txzf android-studio-*-linux.tar.gz -C /opt
echo 'export PATH="/opt/android-studio/bin:$PATH"' >> ~/.bashrc
source ~/.bashrc
echo 'export PATH="/opt/android-studio/bin:$PATH"' >> ~/.zshrc
source ~/.zshrc
echo $PATH
studio # You need to run Android Studio once to configure it (e.g., downloading emulator tools).
```

Install Android tools required for flutter:

- From Android Studio, press "settings" (from the setting icon at the bottom left of the home page before creating a project)
- search "android sdk"
- Go to "SDK Tools" tab at right, then install the following:
  -- Android SDK Command-line Tools (latest)
  -- Android SDK Platform-Tools
  -- Android SDK Build-Tools（最新版）

Then
```bash
echo 'export ANDROID_HOME=$HOME/Android/Sdk' >> ~/.bashrc
echo 'export PATH=$ANDROID_HOME/cmdline-tools/latest/bin:$ANDROID_HOME/platform-tools:$PATH' >> ~/.bashrc
source ~/.bashrc
echo 'export ANDROID_HOME=$HOME/Android/Sdk' >> ~/.zshrc
echo 'export PATH=$ANDROID_HOME/cmdline-tools/latest/bin:$ANDROID_HOME/platform-tools:$PATH' >> ~/.zshrc
source ~/.zshrc
```

## Install flutter SDK:

```bash
cd ~
git clone https://github.com/flutter/flutter.git -b stable

# For zsh
echo 'export PATH="$HOME/flutter/bin:$PATH"' >> ~/.zshrc
source ~/.zshrc
# Or for bash:
echo 'export PATH="$HOME/flutter/bin:$PATH"' >> ~/.bashrc
source ~/.bashrc
# Then
echo $PATH
flutter doctor --android-licenses # Accept the SDK licenses.
flutter doctor # Check if the relative tools are correctly installed and configured.
which flutter
```

The last command will print something like `/home/username/flutter/bin/flutter`. The flutter SDK path is the part befor `/bin/flutter`, namely `/home/username/flutter/`. This will be used to setup flutter extension in VS Code.

## Install flutter extension in VS Code:

- Open VS Code, go to "Extension" icon at left, search for "flutter", and install it.
- Setup flutter SDK path: open command panel by pressing "Ctrl+Shift+P", search for "Flutter: Change SDK", then input your path (from `which flutter`).
 
reference: https://docs.flutter.dev/get-started/install/linux/android#install-the-flutter-sdk


## Build you first flutter project:

- In VS Code, open command panel by pressing "Ctrl+Shift+P", search for "Flutter: New Project". Choose "Application" then follow the guide.
- Open "lib/main.dart", run it with "Run and Debug" from the left triangle debug icon. 
  -- DO NOT use the "Run Code" button at the top right of the script, since it uses a system dart to run a single .dart file, rather than run a Flutter project using the Flutter dart.




## Bonus: a bash script to check SDKs and setup VS Code:

**Attention: this script was generated by ChatGPT-5 AI and is not tested. Use it with caution!**

```bash
#!/usr/bin/env bash
set -e

echo "🔍 检测 Flutter SDK..."
FLUTTER_PATH=$(which flutter 2>/dev/null || true)

if [ -z "$FLUTTER_PATH" ]; then
    echo "❌ 没找到 flutter 命令，请先安装 Flutter SDK。"
    exit 1
else
    FLUTTER_SDK_DIR=$(dirname "$(dirname "$FLUTTER_PATH")")
    echo "✅ 找到 Flutter SDK: $FLUTTER_SDK_DIR"
fi

echo "🔍 检测 Android SDK..."
SDKMANAGER_PATH=$(which sdkmanager 2>/dev/null || true)

if [ -z "$SDKMANAGER_PATH" ]; then
    echo "❌ 没找到 sdkmanager，请安装 Android Studio 并安装 Command-line Tools"
    echo "  官方下载：https://developer.android.com/studio#command-line-tools-only"
    exit 1
else
    ANDROID_SDK_DIR=$(dirname "$(dirname "$SDKMANAGER_PATH")")
    echo "✅ 找到 Android SDK: $ANDROID_SDK_DIR"
fi

echo "🔧 配置环境变量到 ~/.bashrc..."
{
    echo ""
    echo "# Flutter & Android SDK"
    echo "export PATH=\"$FLUTTER_SDK_DIR/bin:\$PATH\""
    echo "export ANDROID_HOME=\"$ANDROID_SDK_DIR\""
    echo "export ANDROID_SDK_ROOT=\"$ANDROID_SDK_DIR\""
    echo "export PATH=\"\$ANDROID_HOME/cmdline-tools/latest/bin:\$ANDROID_HOME/platform-tools:\$PATH\""
} >> ~/.bashrc

echo "🔄 重新加载环境变量..."
source ~/.bashrc

echo "🛠 配置 VS Code Flutter SDK 路径..."
VSCODE_SETTINGS_DIR="$HOME/.config/Code/User"
mkdir -p "$VSCODE_SETTINGS_DIR"
SETTINGS_FILE="$VSCODE_SETTINGS_DIR/settings.json"

if [ ! -f "$SETTINGS_FILE" ]; then
    echo "{}" > "$SETTINGS_FILE"
fi

# 用 jq 修改 JSON（如果没有 jq 则直接用 sed）
if command -v jq >/dev/null 2>&1; then
    TMP_FILE=$(mktemp)
    jq --arg path "$FLUTTER_SDK_DIR" '.["dart.flutterSdkPath"]=$path' "$SETTINGS_FILE" > "$TMP_FILE"
    mv "$TMP_FILE" "$SETTINGS_FILE"
else
    # 直接插入一行（简单方式）
    sed -i '/^{/a\  "dart.flutterSdkPath": "'"$FLUTTER_SDK_DIR"'",' "$SETTINGS_FILE"
fi

echo "✅ 配置完成！请重新启动 VS Code。"
echo "⚡ 你可以运行以下命令检查："
echo "   flutter doctor"
```

Save it to `setup_flutter_env.sh`, then run
```bash
chmod +x setup_flutter_env.sh
./setup_flutter_env.sh
```
